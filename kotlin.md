## Стек технологий, используемый для разработки приложения Магнит под Android

##### Поддерживаемые версии приложения: minSdkVersion 23 (Android 6.0+)

- **Kotlin** основной язык разработки
- **Kotlin Coroutines** для фоновых операций и асинхронных задач
- **Navigation Component** и **single activity** для навигации
- **MVVM** архитектура
- **Retrofit** для сетевых запросов
- **Dagger2** для dependency injection
- **Kotlin Gradle DSL** для конфигурации сборки проекта
- **Moshi** для парсинга json
- **View binding** для биндинга данных на view
- **jUnit 4** для unit тестирования
- **Espresso** и **mockserver** для instrumentation testing
- **POEditor** для локализации и синхронизации строковых ресурсов
- **FCM** для работы с push уведомлениями
- **Yandex AppMetrica** для сбора аналитических данных
- **Travis + Fastlane** для CI/CD сборок
- **Git-flow**. На каждую задачу делаем feature branch и ревью кода. Обязательны, как минимум 2 approve.

### Основные требования к разработке приложений на платформе Android


1. При написании кода обязательно придерживаемся общей конвенции к [стилистике кода на Kotlin](https://kotlinlang.ru/docs/reference/coding-conventions.html). В любой спороной ситуации опираемся только на неё, за исключением общих, оговоренных и описанных в этом разделе командой принципов и подходов.
2. Старайтесь писать код так, чтобы он был понятен всей команде. Чтобы новые коллеги могли без особого труда в нем разобраться.
3. Название классов, методов, параметров и переменных должно быть осмысленным. 
4. Старайтесь декомпозировать логику так, чтобы конкретный класс отвечал только за свой процесс, например, LoginHelper не может содержать логики для персоналных предложений. Не стесняйтесь разделять процессы! Они могут пригодиться в другом месте приложения.
5. Декомпозируйте логику на методы. Идеальный метод - 7 строк и менее. Помните, что каждый метод должен уметь выполнять только свою специфичную функцию. Если вы чувствуете, что часть логики в методе можно вынести в другой, то значит вы на верном пути и смело выносите. 
6. Перед созданием утилитарного метода проверьте, возможно он уже есть в проекте. Если его не оказалось, то подумайте о чистоте кода и о коллегах, вынесите его в утилиты или extensions. Иначе, есть большая вероятность, что вам придется это сделать после ревью кода.
7. Никогда не пишите логику в методах жизненного цикла! Данные методы могут содержать только вызовы других методов (в идеале не больше 1-го). Например:
```
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        initView()
    }
```
8. Все строки и dimensions обязательно должны быть вынесены из общего кода и xml в ресурсы! Исключение могут составить только тестовые и моковые данные. 
9. Если по какой-то причине строка не должна или не может использоваться через ресурсы (например, это ключ для значения в bundle), то она должна быть вынесена в константу. Если данный ключ может использоваться во многих частях проекта, то его следует вынести в отдельный класс констант, специфичный этим данным. Например, в object DateFormatPatterns могут содержаться все паттерны форматирования дат, используемых в проекте ("dd.MM.yyyy" и т.п.).
10. Все ключи от разного рода вспопогательных сервисов (FCM, Yandex e.t.c) обязательно должны быть вынесены в отдельный конфиг из общей конфигурации gradle.
11. В проекте категорически не допускается использование экспериментального api различных библиотек, SDK и средств языка, а так же их alpha и beta версий! Для некоторых beta возможны исключения, но только по согласованию со всей командой (с обоснованием такой необходимости), и только из библиотек поставляемых Android SDK и Google.
12. Подключение сторонних библиотек в проект возможно по согласованию с членами команды и тим-лидом проекта. В основном следует стараться применять собственные решения, если они не требуют масштабных доработок и больших затрат временных ресурсов.
13. Не забывайте писать junit и UI тесты к новому функционалу и обновлять старые.
14. Если есть вопрос, как правильно поступить в той или иной ситуации не стесняйтесь посоветоваться с коллегой или тим лидом. Наша общая задача не просто написать стабильно работающий проект, но и легко поддерживаемый и масштабируемый в будущем.
